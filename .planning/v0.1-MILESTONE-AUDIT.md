---
milestone: v0.1
audited: 2026-02-26
status: gaps_found
scores:
  requirements: 11/15
  phases: 25/25
  integration: 1/4
  flows: 0/1
gaps:
  requirements:
    - id: "MIGR-04"
      status: "unsatisfied"
      phase: "Phase 42"
      claimed_by_plans: ["42-02-PLAN.md"]
      completed_by_plans: ["42-02-SUMMARY.md"]
      verification_status: "passed (component level)"
      evidence: "S3SnapshotService exists and is unit-tested but E2BToolDispatcher never calls sync(). Zero production callers of S3SnapshotService found."
    - id: "AGNT-01"
      status: "partial"
      phase: "Phase 41"
      claimed_by_plans: ["41-03-PLAN.md"]
      completed_by_plans: ["41-03-SUMMARY.md"]
      verification_status: "passed (component level)"
      evidence: "TAOR loop implemented and unit-tested. No production code calls run_agent_loop() — GenerationService calls runner.run() which raises NotImplementedError on AutonomousRunner."
    - id: "AGNT-02"
      status: "partial"
      phase: "Phase 41"
      claimed_by_plans: ["41-02-PLAN.md", "41-03-PLAN.md"]
      completed_by_plans: ["41-02-SUMMARY.md", "41-03-SUMMARY.md"]
      verification_status: "passed (component level)"
      evidence: "build_system_prompt() correctly consumes idea_brief + understanding_qna. No production code reads these from DB Artifacts and assembles the context dict. context['idea_brief'] would KeyError."
    - id: "AGNT-03"
      status: "partial"
      phase: "Phase 42"
      claimed_by_plans: ["42-01-PLAN.md"]
      completed_by_plans: ["42-01-SUMMARY.md"]
      verification_status: "passed (component level)"
      evidence: "E2BToolDispatcher with 7 tools exists and is protocol-compliant. Never injected as context['dispatcher'] in production — InMemoryToolDispatcher is always the runtime default."
  integration:
    - from: "Phase 41 (TAOR loop)"
      to: "GenerationService"
      issue: "run_agent_loop() is never called by any production path. GenerationService.execute_build() calls runner.run() (old LangGraph path)."
    - from: "Phase 42 (E2BToolDispatcher)"
      to: "Phase 42 (S3SnapshotService)"
      issue: "E2BToolDispatcher never calls S3SnapshotService.sync() after file writes."
    - from: "Phase 43 (BudgetService/CheckpointService/WakeDaemon)"
      to: "Phase 41 (TAOR loop)"
      issue: "All three services are conditional in the loop (if budget_service:) but never injected by any production caller."
  flows:
    - name: "Build job → TAOR → E2B tools → budget tracking → sleep/wake"
      breaks_at: "Step 1: start_generation returns 501 when AUTONOMOUS_AGENT=True; Step 2: execute_build calls runner.run() not run_agent_loop()"
tech_debt:
  - phase: 14-stripe-live-activation
    items:
      - "human_needed: Live Stripe webhook verification pending"
  - phase: 15-ci-cd-hardening
    items:
      - "human_needed: CI pipeline green run verification pending"
  - phase: 17-ci-deploy-pipeline-fix
    items:
      - "human_needed: Deploy pipeline end-to-end verification pending"
  - phase: 27-geo-content
    items:
      - "human_needed: 1/4 must-haves needs manual geo-redirect verification"
  - phase: 31-preview-iframe
    items:
      - "human_needed: Cross-browser iframe preview testing pending"
  - phase: 36-generationservice-wiring-api-routes
    items:
      - "human_needed: E2E generation flow verification pending"
  - phase: 43-token-budget-sleep-wake-daemon
    items:
      - "Email notification for budget_exceeded is stubbed (in-app only currently)"
---

# Milestone v0.1: Autonomous Agent — Audit Report

**Audited:** 2026-02-26
**Status:** gaps_found
**Phases:** 25/25 complete (all individually verified)
**v0.7 Requirements in scope:** 15 (mapped to phases 40-43)
**v0.7 Requirements satisfied:** 11/15

## Phase Verification Summary

All 25 phases passed their individual VERIFICATION.md checks:

| Phase | Name | Verification | Score |
|-------|------|-------------|-------|
| 13 | LLM Activation and Hardening | verified | 5/5 |
| 14 | Stripe Live Activation | human_needed | 5/5 |
| 15 | CI/CD Hardening | human_needed | 9/9 |
| 16 | CloudWatch Observability | passed | 5/5 |
| 17 | CI/Deploy Pipeline Fix | human_needed | 5/5 |
| 22 | Security Headers + Baseline Audit | passed | 5/5 |
| 22.1 | E2E Flow — Strategy Graph, Timeline & Architecture | passed | 14/14 |
| 23 | Performance Baseline | passed | 7/7 |
| 24 | SEO Infrastructure | passed | 15/15 |
| 25 | Loading UX | passed | 5/5 |
| 26 | Image Pipeline | passed | 8/8 |
| 27 | GEO + Content | human_needed | 3/4 |
| 28 | Sandbox Runtime Fixes | passed | 9/9 |
| 29 | Build Log Streaming | passed | 4/4 |
| 30 | Frontend Build UX | passed | 13/13 |
| 31 | Preview Iframe | human_needed | 13/13 |
| 32 | Sandbox Snapshot Lifecycle | passed | 11/11 |
| 33 | Infrastructure & Configuration | passed | 14/14 |
| 34 | ScreenshotService | passed | 4/4 |
| 35 | DocGenerationService | passed | 9/9 |
| 36 | GenerationService Wiring & API Routes | human_needed | 6/6 |
| 40 | LangGraph Removal + Protocol Extension | passed | 17/17 |
| 41 | Autonomous Runner Core (TAOR Loop) | passed | — |
| 42 | E2B Tool Dispatcher | passed | 15/15 |
| 43 | Token Budget + Sleep/Wake Daemon | passed | 8/8 |

## v0.7 Requirements Coverage (3-Source Cross-Reference)

### Satisfied (11/15)

| Requirement | Phase | VERIFICATION | SUMMARY | Traceability | Status |
|-------------|-------|-------------|---------|-------------|--------|
| MIGR-01 | 40 | passed | listed | Complete | **satisfied** |
| MIGR-02 | 40 | passed | listed | Complete | **satisfied** |
| MIGR-03 | 40 | passed | listed | Complete | **satisfied** |
| AGNT-06 | 41 | passed | listed | Complete | **satisfied** |
| BDGT-01 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-02 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-03 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-04 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-05 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-06 | 43 | passed | listed | Complete | **satisfied** |
| BDGT-07 | 43 | passed | listed | Complete | **satisfied** |

*Note: BDGT-01 through BDGT-07 and AGNT-06 are satisfied at component + unit test level. Their phase verifications confirmed the components exist, work correctly, and pass all tests. The integration gap (services not injected in production) is a cross-phase wiring issue addressed below, not a per-requirement failure.*

### Partial / Unsatisfied (4/15)

| Requirement | Phase | Issue | Status |
|-------------|-------|-------|--------|
| **MIGR-04** | 42 | S3SnapshotService exists but E2BToolDispatcher never calls sync(). Zero production callers. | **unsatisfied** |
| **AGNT-01** | 41 | TAOR loop implemented + tested. No production code calls run_agent_loop(). | **partial** |
| **AGNT-02** | 41 | build_system_prompt() works. No production code reads idea_brief/understanding_qna from DB. | **partial** |
| **AGNT-03** | 42 | E2BToolDispatcher with 7 tools works. Never injected in production — InMemoryToolDispatcher always used. | **partial** |

### Not in Scope (9 requirements — assigned to phases 44-46)

AGNT-04, AGNT-05, AGNT-07, AGNT-08, UIAG-01, UIAG-02, UIAG-03, UIAG-04, UIAG-05

These are assigned to future phases not in this milestone.

## Cross-Phase Integration

### Root Cause

Phases 40-43 implemented all individual components correctly with full unit + integration test coverage. The gap is a **single missing integration layer**: no production orchestration code assembles the Phase 41-43 services into a context dict and calls `run_agent_loop()` instead of `runner.run()`.

### What's Missing

1. **GenerationService glue** — `execute_build()` calls `runner.run()` (old path). Needs a branch that:
   - Reads `idea_brief` + `understanding_qna` from DB Artifacts
   - Instantiates `E2BToolDispatcher`, `BudgetService`, `CheckpointService`, `WakeDaemon`
   - Launches `asyncio.create_task(wake_daemon.run())`
   - Calls `runner.run_agent_loop(context)` instead of `runner.run(agent_state)`

2. **E2BToolDispatcher → S3SnapshotService** — sync() call after file-writing tools

3. **AutonomousRunner model resolution** — Call `resolve_llm_config(user_id, role)` instead of hardcoding Sonnet

4. **501 gate removal** — When integration glue is ready, remove the 501 early return so `_build_runner()` is reachable

### E2E Flow Status

| Step | Expected | Actual | Status |
|------|----------|--------|--------|
| User clicks Build | Job enqueued | 501 returned (intentional gate) | BLOCKED |
| Worker processes job | run_agent_loop() called | runner.run() called (NotImplementedError) | BROKEN |
| TAOR loop gets context | idea_brief from DB | Never assembled | BROKEN |
| Tools dispatch to E2B | E2BToolDispatcher | InMemoryToolDispatcher | BROKEN |
| S3 sync after writes | sync() called | Never called | BROKEN |
| Cost tracked per call | BudgetService injected | Never injected | BROKEN |
| Checkpoint per iteration | CheckpointService injected | Never injected | BROKEN |
| Sleep on budget exhaust | WakeDaemon running | Never launched | BROKEN |

## Tech Debt (Non-Critical)

6 phases have `human_needed` verification items (manual testing pending):
- Phase 14: Live Stripe webhook verification
- Phase 15: CI pipeline green run
- Phase 17: Deploy pipeline E2E
- Phase 27: Geo-redirect manual test
- Phase 31: Cross-browser iframe preview
- Phase 36: E2E generation flow

1 deferred item:
- Phase 43: Email notification for budget_exceeded is stubbed (in-app SSE only)

## Recommendation

The 4 unsatisfied/partial requirements all share one root cause: **missing production integration glue**. This is a single focused phase (~2-3 plans) that:
1. Wires `GenerationService` to call `run_agent_loop()` with full context assembly
2. Connects `E2BToolDispatcher` to `S3SnapshotService.sync()`
3. Resolves model from subscription tier via `resolve_llm_config()`
4. Removes the 501 gate (or makes it conditional on integration readiness)

Run `/gsd:plan-milestone-gaps` to auto-generate this integration phase.
