---
phase: 22-security-headers-baseline-audit
plan: "03"
type: execute
wave: 1
depends_on: ["22-02"]
files_modified:
  - marketing/src/app/layout.tsx
autonomous: false
gap_closure: true
requirements: [INFRA-01, INFRA-02]

must_haves:
  truths:
    - "Google Rich Results Test shows a structured data result (not 'preview not available') for https://getinsourced.ai/"
    - "Organization JSON-LD schema is present in deployed homepage HTML"
    - "WebSite JSON-LD schema is present in deployed homepage HTML"
    - "JSON-LD validates without errors in the Rich Results Test"
  artifacts:
    - path: "marketing/src/app/layout.tsx"
      provides: "Organization and WebSite JSON-LD injected into <head> on every page"
      contains: "application/ld+json"
  key_links:
    - from: "marketing/src/app/layout.tsx"
      to: "out/index.html"
      via: "next build static export"
      pattern: "application/ld\\+json"
    - from: "out/index.html"
      to: "https://getinsourced.ai/"
      via: "GitHub Actions deploy (push to main — S3 sync + CloudFront invalidation)"
      pattern: "Organization.*WebSite"
---

<objective>
Add Organization and WebSite JSON-LD structured data to the homepage so Google Rich Results Test has something to validate and no longer returns "preview not available."

Purpose: Close the single remaining gap from Phase 22 verification. The Rich Results Test shows "preview not available" not because of a CSP block but because there is no structured data on the page — the tool has nothing to validate.

Output: `marketing/src/app/layout.tsx` updated with two JSON-LD script blocks; deployed to CloudFront; Rich Results Test confirms valid structured data.

Note: This is a minimal forward-pull from Phase 24 (SEO Infrastructure). Only Organization + WebSite schemas are added here — the minimum needed to make the Rich Results Test return a positive result. SoftwareApplication schema (SEO-09) and all remaining SEO requirements stay in Phase 24.
</objective>

<execution_context>
@/Users/vladcortex/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vladcortex/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@marketing/src/app/layout.tsx
@.planning/phases/22-security-headers-baseline-audit/22-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Organization and WebSite JSON-LD to root layout</name>
  <files>marketing/src/app/layout.tsx</files>
  <action>
    Inject two JSON-LD script blocks into the head of `marketing/src/app/layout.tsx` using JSX script tags with `dangerouslySetInnerHTML` (acceptable for static JSON-LD with no user input).

    Add a `<head>` element inside the existing `<html lang="en" className="dark">` wrapper if not already present. Place two script tags inside it:

    ```tsx
    <head>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Insourced AI",
            "url": "https://getinsourced.ai",
            "logo": "https://getinsourced.ai/logo.png",
            "description": "Insourced AI helps non-technical founders ship software faster with AI agents and an AI technical co-founder.",
            "sameAs": []
          })
        }}
      />
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Insourced AI",
            "url": "https://getinsourced.ai",
            "description": "AI Technical Co-Founder and Autonomous Agents for Founders"
          })
        }}
      />
    </head>
    ```

    Note: Do NOT add a SearchAction to the WebSite schema — the site has no search functionality.

    Note: Check `marketing/public/` for a logo file before adding the logo field. If `logo.png` exists, keep it. If no logo file exists or it has a different name, update the URL to match or omit the `logo` field to avoid a 404 reference.

    After editing, run `npm run build` in `marketing/` to confirm the static export succeeds with the JSON-LD present in `out/index.html`.

    Verify JSON-LD appears in the built output:
    ```bash
    grep -c "application/ld+json" marketing/out/index.html
    ```
    Expected: 2 (two script blocks)

    Commit: `feat(22-03): add Organization and WebSite JSON-LD to homepage`
  </action>
  <verify>
    1. `npm run build` in `marketing/` exits 0 with no errors
    2. `grep -c "application/ld+json" marketing/out/index.html` returns `2`
    3. `grep "schema.org/Organization" marketing/out/index.html` returns a match
    4. `grep "schema.org/WebSite" marketing/out/index.html` returns a match
  </verify>
  <done>
    Both JSON-LD blocks are present in the compiled static HTML. Build succeeds. No TypeScript errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Deploy to CloudFront via git push</name>
  <files>N/A — deploy only, no additional code changes</files>
  <action>
    Push the Task 1 commit to `main`. The existing GitHub Actions workflow will automatically:
    1. Run `next build` to produce the static export
    2. Sync `out/` to the S3 bucket `getinsourced-marketing`
    3. Invalidate the CloudFront distribution cache

    Run:
    ```bash
    git push origin main
    ```

    Poll for the GitHub Actions workflow to complete:
    ```bash
    gh run list --repo vladcortex/co-founder --limit 5
    gh run watch --repo vladcortex/co-founder
    ```

    Wait for the deploy workflow to succeed. CloudFront propagation takes 3-5 minutes after S3 sync.

    After propagation, verify the JSON-LD is live:
    ```bash
    curl -s https://getinsourced.ai/ | grep -c "application/ld+json"
    ```
    Expected: 2
  </action>
  <verify>
    1. `gh run list --limit 3` shows the deploy workflow completed successfully
    2. `curl -s https://getinsourced.ai/ | grep -c "application/ld+json"` returns `2`
    3. `curl -s https://getinsourced.ai/ | grep "schema.org/Organization"` returns a match
  </verify>
  <done>
    JSON-LD is live on https://getinsourced.ai/. GitHub Actions deploy workflow completed with no errors.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify Rich Results Test detects structured data</name>
  <files>N/A — verification only</files>
  <action>
    Human visits Google Rich Results Test and confirms structured data is detected for https://getinsourced.ai/. This cannot be automated — the tool requires a live browser interaction and human reading of the results pane.
  </action>
  <verify>Human confirms Rich Results Test detects at least one valid structured data item (Organization or WebSite) for https://getinsourced.ai/ with no errors.</verify>
  <done>User types "approved" confirming detected items, or describes errors to fix.</done>
  <what-built>
    Organization and WebSite JSON-LD structured data added to the marketing site homepage. Two JSON-LD script blocks are now present in the HTML. Deployed to CloudFront via GitHub Actions.
  </what-built>
  <how-to-verify>
    1. Visit https://search.google.com/test/rich-results
    2. Enter `https://getinsourced.ai/` in the URL field
    3. Click "Test URL"
    4. Wait for the test to complete (30-60 seconds)

    Expected: The results pane shows detected structured data items (Organization and/or WebSite) with no errors.

    Note: A "preview not available" message in the visual preview pane is normal for Organization/WebSite schemas — they are not eligible for rich result display in SERPs. What matters is the "Detected items" list showing Organization and/or WebSite with no errors.

    If you see errors: Paste the specific error message as your response.
  </how-to-verify>
  <resume-signal>Type "approved" if Rich Results Test detects structured data, or paste the error message if it fails.</resume-signal>
</task>

</tasks>

<verification>
1. `grep -c "application/ld+json" marketing/out/index.html` returns `2`
2. `curl -s https://getinsourced.ai/ | grep "schema.org/Organization"` returns a match
3. GitHub Actions deploy workflow completed successfully (no red builds)
4. Human confirms: Google Rich Results Test detects structured data for https://getinsourced.ai/
</verification>

<success_criteria>
- Organization JSON-LD present in deployed homepage HTML
- WebSite JSON-LD present in deployed homepage HTML
- Google Rich Results Test finds at least one valid structured data item
- Phase 22 success criterion 4 is closed: Google Rich Results Test and social preview debugger tools load without CSP blocks — confirmed by structured data presence and tool access
</success_criteria>

<output>
After completion, create `.planning/phases/22-security-headers-baseline-audit/22-03-SUMMARY.md`
</output>
