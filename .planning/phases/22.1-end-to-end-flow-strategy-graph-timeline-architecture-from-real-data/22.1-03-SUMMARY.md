---
phase: 22.1-end-to-end-flow
plan: 03
subsystem: ui
tags: [react, nextjs, typescript, force-graph, artifact, strategy-graph, mvp-timeline]

# Dependency graph
requires:
  - phase: 22.1-01
    provides: ArtifactType enum with STRATEGY_GRAPH and MVP_TIMELINE values, RunnerFake with realistic test doubles
provides:
  - Dual-mode strategy page with artifact-based force graph (amber anchor + pink strategy nodes) falling back to Neo4j
  - ForceGraphInner extended with anchor/strategy node types, amber 1.5x anchor sizing, label/title dual rendering
  - GraphMinimap legend extended with Anchor (amber) and Strategy (pink) entries
  - MvpTimeline React component with vertical timeline, week badges, deliverable pills, long-term roadmap section
  - Dual-mode timeline page showing MVP milestones from artifact above Kanban board
affects:
  - 22.1-04 (architecture page — same artifact-fetch pattern)
  - 22.1-05 (orchestration)
  - 22.1-06 (integration)

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Dual-mode page pattern: fetch artifact first, fallback to system data (Neo4j/Kanban)"
    - "Artifact graph hydration: convert artifact JSONB nodes/edges to GraphNode/GraphLink types"
    - "Anchor phrase tags: amber pill chips above graph to surface user's verbatim words"

key-files:
  created:
    - frontend/src/components/timeline/MvpTimeline.tsx
  modified:
    - frontend/src/app/(dashboard)/projects/[id]/strategy/page.tsx
    - frontend/src/components/strategy-graph/ForceGraphInner.tsx
    - frontend/src/components/strategy-graph/GraphMinimap.tsx
    - frontend/src/app/(dashboard)/projects/[id]/timeline/page.tsx

key-decisions:
  - "Dual-mode pattern for both pages: artifact-driven when available, system data as fallback — no tab switching UI needed"
  - "Kanban board always shown on timeline page (below MVP milestones or as sole content) — system events remain visible"
  - "Anchor nodes rendered 1.5x larger in force graph to make user's verbatim words visually prominent"
  - "anchor_phrases shown as amber pill tags above graph — gives immediate 'this AI gets my idea' signal"

patterns-established:
  - "Artifact-first fetch: apiFetch /api/artifacts/project/{id} → find by artifact_type + generation_status=idle → fallback if missing"
  - "GraphNode type union: decision | milestone | artifact | anchor | strategy (backward compatible)"

requirements-completed:
  - E2E-STRATEGY
  - E2E-TIMELINE

# Metrics
duration: 2min
completed: 2026-02-21
---

# Phase 22.1 Plan 03: Strategy Graph + Timeline Artifact Display Summary

**Dual-mode strategy and timeline pages: artifact force-graph with amber anchor nodes and pink strategy nodes, plus MvpTimeline component with vertical timeline, week badges, and deliverable pills**

## Performance

- **Duration:** 2 min
- **Started:** 2026-02-20T21:49:52Z
- **Completed:** 2026-02-20T21:52:00Z
- **Tasks:** 2
- **Files modified:** 5 (1 created)

## Accomplishments
- Strategy page fetches strategy_graph artifact first, converts nodes/edges to GraphNode format, shows anchor phrases as amber tags above graph; falls back to Neo4j graph when no artifact exists
- ForceGraphInner extended: anchor (amber #F59E0B) and strategy (pink #EC4899) node types, anchor nodes rendered 1.5x larger, label/title dual display for backward compat
- GraphMinimap legend updated with Anchor and Strategy entries
- MvpTimeline component built with vertical timeline, numbered milestone dots, week badges (e.g. "Week 1–2"), deliverable CheckCircle2 pills, long-term roadmap section with dashed borders
- Timeline page fetches mvp_timeline artifact and renders MvpTimeline above existing KanbanBoard; subtitle updates to "Your personalized MVP launch plan" when artifact present

## Task Commits

Each task was committed atomically:

1. **Task 1: Strategy graph dual-mode with anchor + strategy nodes from artifact** - `8980b23` (feat)
2. **Task 2: Timeline dual-mode with MVP milestones from artifact** - `5c0301c` (feat)

## Files Created/Modified
- `frontend/src/app/(dashboard)/projects/[id]/strategy/page.tsx` - Dual-mode: artifact graph (anchor+strategy nodes) + anchor phrase tags; Neo4j fallback
- `frontend/src/components/strategy-graph/ForceGraphInner.tsx` - Extended GraphNode interface, NODE_COLORS anchor+strategy, 1.5x anchor radius, label??title display
- `frontend/src/components/strategy-graph/GraphMinimap.tsx` - NODE_COLORS + legend extended with Anchor (amber) + Strategy (pink)
- `frontend/src/app/(dashboard)/projects/[id]/timeline/page.tsx` - Dual-mode: mvp_timeline artifact -> MvpTimeline; always renders KanbanBoard
- `frontend/src/components/timeline/MvpTimeline.tsx` (created) - Vertical timeline component with week badges, deliverable pills, long-term roadmap section

## Decisions Made
- Dual-mode pattern (no tab UI): artifact wins when present, system data is silent fallback — cleaner UX than tabs
- Kanban board stays visible below MVP milestones so system events aren't lost
- Anchor nodes 1.5x larger than strategy nodes — user's own words deserve visual prominence in their own strategy graph

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None — TypeScript compiled cleanly on first attempt for both tasks.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness
- Strategy and Timeline pages ready to show personalized artifact content as soon as artifacts are generated
- Pattern established for artifact-first page loading — Plan 04 (architecture page) can follow the same pattern
- MvpTimeline component accepts the exact schema from RunnerFake's mvp_timeline test double

## Self-Check: PASSED

All files verified present on disk. All task commits verified in git log.

- FOUND: frontend/src/components/timeline/MvpTimeline.tsx
- FOUND: frontend/src/app/(dashboard)/projects/[id]/strategy/page.tsx
- FOUND: frontend/src/app/(dashboard)/projects/[id]/timeline/page.tsx
- FOUND: frontend/src/components/strategy-graph/ForceGraphInner.tsx
- FOUND: frontend/src/components/strategy-graph/GraphMinimap.tsx
- FOUND: .planning/phases/22.1-.../22.1-03-SUMMARY.md
- FOUND: 8980b23 (Task 1 commit)
- FOUND: 5c0301c (Task 2 commit)

---
*Phase: 22.1-end-to-end-flow*
*Completed: 2026-02-21*
