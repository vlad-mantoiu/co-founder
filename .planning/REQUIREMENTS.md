# Requirements: AI Co-Founder

**Defined:** 2026-02-24
**Core Value:** A non-technical founder can go from idea to running MVP preview in under 10 minutes, making product decisions the entire way.

## v0.7 Requirements

Requirements for v0.7 Autonomous Agent. Each maps to roadmap phases.

### Agent Core

- [x] **AGNT-01**: Agent executes a TAOR (Think-Act-Observe-Repeat) loop using Anthropic tool-use API, autonomously deciding next actions until build is complete or human input needed
- [x] **AGNT-02**: Agent consumes Understanding Interview QnA + Idea Brief as input context, using it to make autonomous product/architecture decisions
- [ ] **AGNT-03**: Agent has 7 Claude Code-style tools operating inside E2B sandbox: read_file, write_file, edit_file, bash, grep, glob, take_screenshot
- [ ] **AGNT-04**: Agent handles narration natively via narrate() tool — first-person co-founder voice describing what it's doing and why
- [ ] **AGNT-05**: Agent handles documentation generation natively as part of its workflow — no separate DocGenerationService
- [x] **AGNT-06**: Agent loop has iteration cap (MAX_TOOL_CALLS), repetition detection, and context window management (middle-truncation of large tool results)
- [ ] **AGNT-07**: Agent retries failed operations 3 times with different approaches per error signature before escalating to founder with structured context
- [ ] **AGNT-08**: Agent escalation surfaces problem description, what was tried, and recommended action to founder via existing DecisionConsole pattern

### Budget & Daemon

- [ ] **BDGT-01**: Token budget daemon calculates daily allowance from remaining tokens and days until subscription renewal
- [ ] **BDGT-02**: Agent transitions to "sleeping" state when daily token budget is consumed
- [ ] **BDGT-03**: Agent wakes automatically when daily budget refreshes (next calendar day or subscription reset)
- [ ] **BDGT-04**: Agent state persists across sleep/wake cycles — conversation history stored in PostgreSQL (AgentCheckpoint table)
- [ ] **BDGT-05**: Model is configurable per subscription tier — Opus for premium, Sonnet for budget tiers
- [ ] **BDGT-06**: Per-tool cost tracking records input/output tokens and cost per API call in Redis
- [ ] **BDGT-07**: Cost runaway prevention — hard daily ceiling kills agent loop if budget exceeded by >10%

### UI & Integration

- [ ] **UIAG-01**: GSD phases created by agent appear on Kanban Timeline with live status (pending/in-progress/complete)
- [ ] **UIAG-02**: Activity feed shows phase-level summaries by default ("Planning authentication system...", "Building login page...")
- [ ] **UIAG-03**: Verbose toggle in activity feed reveals tool-level detail (individual file writes, bash commands, screenshots)
- [ ] **UIAG-04**: Dashboard displays agent state: working, sleeping, waiting-for-input, error
- [ ] **UIAG-05**: New SSE event types stream agent actions to frontend (agent.thinking, agent.tool.called, agent.sleeping, gsd.phase.started, gsd.phase.completed)

### Cleanup & Migration

- [x] **MIGR-01**: LangGraph, LangChain deps atomically removed — all 6 node files, graph.py, NarrationService, DocGenerationService deleted
- [x] **MIGR-02**: Feature flag (AUTONOMOUS_AGENT env var) toggles between old RunnerReal and new AutonomousRunner during transition
- [x] **MIGR-03**: Runner protocol extended with run_agent_loop() — RunnerFake stubs it for TDD, AutonomousRunner implements it
- [ ] **MIGR-04**: E2B sandbox file sync to S3 after each commit step — mitigates multi-resume file loss (E2B #884)

## v0.6 Requirements (Partial — Phases 33-36 Shipped, 37-39 Abandoned)

### Completed (Phases 33-36)

- [x] **INFRA-01**: S3 bucket (cofounder-screenshots) provisioned via CDK with CloudFront OAC and immutable cache headers
- [x] **INFRA-02**: ECS task role has PutObject permission on screenshots bucket
- [x] **INFRA-04**: screenshot_enabled feature flag in Settings toggles screenshot capture without redeployment
- [x] **INFRA-05**: Settings include screenshots_bucket and screenshots_cloudfront_domain environment variables
- [x] **SNAP-01**: Screenshot captured after each completed build stage via Playwright
- [x] **SNAP-02**: Screenshots stored in S3 and served via CloudFront URL
- [x] **SNAP-06**: Screenshots below 5KB discarded as likely blank
- [x] **SNAP-07**: Screenshot failure is non-fatal — build continues if capture fails
- [x] **DOCS-01**: End-user documentation generated by separate Claude API call during build
- [x] **DOCS-02**: Sections appear progressively (Overview → Features → Getting Started → FAQ)
- [x] **DOCS-03**: Documentation generation starts at scaffold.completed
- [x] **DOCS-07**: Documentation content is founder-safe
- [x] **DOCS-08**: Documentation generation failure is non-fatal
- [x] **DOCS-09**: Changelog generated comparing build iterations
- [x] **NARR-02**: Claude generates idea-specific narration per stage transition
- [x] **NARR-04**: Narration uses first-person co-founder voice
- [x] **NARR-08**: Safety guardrails strip internal paths, stack traces, and secrets from narration
- [x] **SNAP-03**: SSE snapshot.updated event emitted when new screenshot is available

### Abandoned (Phases 37-39 — Deferred)

- INFRA-03, NARR-01, NARR-03, NARR-05, NARR-06, NARR-07
- SNAP-04, SNAP-05, DOCS-04, DOCS-05, DOCS-06
- REAS-01 through REAS-07, COMP-01 through COMP-07
- LAYOUT-01 through LAYOUT-04

*Abandoned in favor of v0.7 autonomous agent architecture. UI features will be re-scoped against the new agent model in a future milestone.*

## Future Requirements

Deferred to future release. Tracked but not in current roadmap.

### Post-v0.7

- **ITER-01**: Founder can request changes to running app via text input
- **ITER-02**: System generates diff, applies changes, rebuilds sandbox
- **ITER-03**: Founder sees before/after comparison of changes
- **ITER-04**: Build history with rollback to previous versions
- **EXPORT-01**: Generated code pushed to GitHub repo owned by founder
- **EXPORT-02**: Founder can download generated code as zip
- **SNAP-08**: Time-lapse playback of build progression
- **SNAP-09**: Snapshot comparison diff between iterations
- **COMP-08**: Per-build stats card from structured agent output
- **COMP-09**: Shareable build completion permalink with screenshot embed
- **REAS-08**: Email notification backend endpoint for builds exceeding 5 minutes
- **NOTIF-01**: Founder receives email/push when agent needs input
- **NOTIF-02**: Founder receives notification when agent wakes from sleep

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Live video stream of sandbox desktop | Requires WebRTC/WebSocket video infrastructure — disproportionate to value |
| Real-time token streaming in activity feed | Creates cognitive chaos — incomplete sentences overwriting themselves |
| VNC/remote desktop into sandbox | Destroys "engineering team building for you" framing; security risk |
| Auto-redirect on build completion | Destroys the emotional reveal moment |
| GitHub push on completion | Out of scope per PROJECT.md — future milestone |
| Production deploy on completion | Skips Deploy Readiness assessment stage |
| Mobile-optimized layout | Desktop-first; most founders use desktop |
| Multi-agent sub-delegation | Single agent is simpler; avoid sub-agent recursion pitfalls |
| Real-time collaborative editing | Single-founder tool for now |
| Custom E2B sandbox templates | Default templates sufficient for MVP builds |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| MIGR-01 | Phase 40 | Complete |
| MIGR-02 | Phase 40 | Complete |
| MIGR-03 | Phase 40 | Complete |
| AGNT-01 | Phase 41 | Pending |
| AGNT-02 | Phase 41 | Complete |
| AGNT-06 | Phase 41 | Pending |
| AGNT-03 | Phase 42 | Pending |
| MIGR-04 | Phase 42 | Pending |
| BDGT-01 | Phase 43 | Pending |
| BDGT-02 | Phase 43 | Pending |
| BDGT-03 | Phase 43 | Pending |
| BDGT-04 | Phase 43 | Pending |
| BDGT-05 | Phase 43 | Pending |
| BDGT-06 | Phase 43 | Pending |
| BDGT-07 | Phase 43 | Pending |
| AGNT-04 | Phase 44 | Pending |
| AGNT-05 | Phase 44 | Pending |
| AGNT-07 | Phase 45 | Pending |
| AGNT-08 | Phase 45 | Pending |
| UIAG-01 | Phase 46 | Pending |
| UIAG-02 | Phase 46 | Pending |
| UIAG-03 | Phase 46 | Pending |
| UIAG-04 | Phase 46 | Pending |
| UIAG-05 | Phase 46 | Pending |

**Coverage:**
- v0.7 requirements: 24 total
- Mapped to phases: 24
- Unmapped: 0 ✓

---
*Requirements defined: 2026-02-24*
*Last updated: 2026-02-24 — v0.7 requirements mapped to phases 40-46*
