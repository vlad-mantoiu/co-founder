---
phase: 10-export-deploy-readiness-e2e-testing
plan: 09
type: execute
wave: 4
depends_on: ["10-07", "10-08"]
files_modified:
  - frontend/src/components/chat/FloatingChat.tsx
  - frontend/src/components/chat/ChatMessage.tsx
  - frontend/src/components/chat/ChatInput.tsx
  - frontend/src/app/(dashboard)/layout.tsx
  - frontend/src/components/ui/brand-nav.tsx
  - frontend/src/components/deploy/DeployReadinessPanel.tsx
  - frontend/src/components/deploy/DeployPathCard.tsx
autonomous: true

must_haves:
  truths:
    - "Floating chat button in bottom-right corner overlays any dashboard page"
    - "Chat opens as panel from bottom-right with slide-up animation"
    - "Chat conversations are ephemeral (no persistence across page refresh)"
    - "Chat de-emphasized in navigation (not primary entry point)"
    - "Deploy readiness shows traffic light with expandable details"
    - "Deploy paths show 2-3 options with tradeoffs"
  artifacts:
    - path: "frontend/src/components/chat/FloatingChat.tsx"
      provides: "Floating chat overlay component"
      contains: "MessageCircle"
    - path: "frontend/src/components/deploy/DeployReadinessPanel.tsx"
      provides: "Deploy readiness traffic light panel"
      contains: "traffic"
    - path: "frontend/src/app/(dashboard)/layout.tsx"
      provides: "Layout with FloatingChat injected"
      contains: "FloatingChat"
  key_links:
    - from: "frontend/src/app/(dashboard)/layout.tsx"
      to: "frontend/src/components/chat/FloatingChat.tsx"
      via: "Rendered as fixed overlay in layout"
      pattern: "FloatingChat"
    - from: "frontend/src/components/deploy/DeployReadinessPanel.tsx"
      to: "backend/app/api/routes/deploy_readiness.py"
      via: "fetch /api/deploy-readiness/{project_id}"
      pattern: "deploy-readiness"
---

<objective>
Floating chat widget, chat de-emphasis in nav, and deploy readiness UI.

Purpose: CHAT-01 (floating bottom-right), CHAT-02 (de-emphasized nav), deploy readiness frontend per locked decisions. Chat is the secondary input method — always accessible via floating bubble but not the primary navigation item.

Output: FloatingChat component, nav de-emphasis, deploy readiness panel.
</objective>

<execution_context>
@/Users/vladcortex/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vladcortex/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-export-deploy-readiness-e2e-testing/10-RESEARCH.md

@frontend/src/app/(dashboard)/layout.tsx
@frontend/src/components/ui/brand-nav.tsx
@frontend/src/components/chat/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Floating Chat widget and nav de-emphasis</name>
  <files>frontend/src/components/chat/FloatingChat.tsx, frontend/src/components/chat/ChatMessage.tsx, frontend/src/components/chat/ChatInput.tsx, frontend/src/app/(dashboard)/layout.tsx, frontend/src/components/ui/brand-nav.tsx</files>
  <action>
    **Create `frontend/src/components/chat/FloatingChat.tsx`:**
    Per locked decision: "Floating chat button in bottom-right corner (like Intercom/Crisp) — overlays any page, always accessible"

    "use client" component:
    - Fixed bottom-right bubble button (w-14 h-14, rounded-full, brand color, shadow)
    - Uses lucide-react MessageCircle icon
    - On click: opens chat panel with framer-motion slide-up animation
    - Chat panel: fixed bottom-24 right-6, w-96 h-[500px], glass-strong styling
    - Header with "Co-Founder Chat" title and X close button
    - Message list in scrollable container
    - Input bar at bottom
    - Conversations ephemeral — useState for messages, cleared on component unmount (locked decision: "no persistence across sessions")
    - Context fetch: when panel opens, fetch project context once from dashboard API (if projectId prop provided). Store in state, don't re-fetch on every message.

    Per locked decision: "Chat can answer questions AND trigger actions":
    - Chat actions: implement simple intent detection. If assistant response contains `[ACTION:navigate:/path]`, extract and call router.push. If `[ACTION:start_build:project_id]`, call generation start API.
    - For MVP: actions are parsed from assistant responses, not sent by user.

    Per locked decision: "Full project context awareness":
    - When sending message to API, include `project_context` with current project state (stage, build status, etc.) fetched on panel open.

    **Create `frontend/src/components/chat/ChatMessage.tsx`:**
    Renders a single chat message bubble. User messages right-aligned (brand color bg), assistant messages left-aligned (glass bg). Timestamp below. Markdown rendering for assistant messages.

    **Create `frontend/src/components/chat/ChatInput.tsx`:**
    Text input with Send button. Enter to send, Shift+Enter for newline. Disabled while assistant is responding.

    **Inject FloatingChat in dashboard layout:**
    Update `frontend/src/app/(dashboard)/layout.tsx` to render `<FloatingChat />` as a sibling of `<main>`, outside the max-w-6xl container so it floats freely.

    **De-emphasize Chat in BrandNav:**
    Update `frontend/src/components/ui/brand-nav.tsx`:
    - Move Chat link to end of nav list (after Timeline)
    - Apply dimmer styling: `opacity-60 text-sm` instead of normal nav item styling
    - Keep the link functional (backwards compatibility) but visually secondary
    - The floating chat bubble is now the primary chat entry point
  </action>
  <verify>
    `cd /Users/vladcortex/co-founder && npx tsc --noEmit frontend/src/components/chat/FloatingChat.tsx frontend/src/app/\(dashboard\)/layout.tsx 2>&1 | head -20` — no type errors.
    Verify FloatingChat is imported in layout.tsx.
    Verify Chat is last item in BrandNav with reduced opacity.
  </verify>
  <done>Floating chat overlays all dashboard pages. Conversations ephemeral. Chat de-emphasized in nav. CHAT-01, CHAT-02 satisfied.</done>
</task>

<task type="auto">
  <name>Task 2: Deploy readiness UI components</name>
  <files>frontend/src/components/deploy/DeployReadinessPanel.tsx, frontend/src/components/deploy/DeployPathCard.tsx, frontend/src/app/(dashboard)/company/[id]/deploy/page.tsx</files>
  <action>
    **Create `frontend/src/components/deploy/DeployReadinessPanel.tsx`:**
    Per locked decision: "Traffic light summary (Green/Yellow/Red) for overall deploy status with expandable details on demand"

    Props: `{ projectId: string }`
    - Fetches from GET /api/deploy-readiness/{project_id} on mount
    - Shows traffic light circle (green/yellow/red) with overall status text
    - "Ready to deploy" / "Some issues to fix" / "Not ready to deploy" — large text
    - Expandable details section:
      - Blocking issues (red): each with title, message, and copy-pasteable fix_instruction (per locked decision: "copy-pasteable instructions per blocker")
      - Warnings (yellow): each with title and message
      - All passing checks (green): collapsed by default
    - Per locked decision: "Blocking issues show specific actionable guidance"

    **Create `frontend/src/components/deploy/DeployPathCard.tsx`:**
    Per locked decision: "2-3 deploy path options with tradeoffs — founder picks"

    Props: `{ path: DeployPathOption, recommended: boolean, onSelect: () => void }`
    - Card with name, description, difficulty badge, cost
    - Tradeoffs as bullet points
    - Steps as numbered list
    - "Recommended" badge if this is the recommended path
    - Select button that navigates to deploy instructions view

    Per locked decision: "Instructions only for MVP — no one-click deploy automation, provide clear step-by-step guide"

    **Create deploy page `frontend/src/app/(dashboard)/company/[id]/deploy/page.tsx`:**
    - Uses DeployReadinessPanel
    - Below: grid of DeployPathCard components (1 card per deploy path)
    - When founder selects a path, shows expanded step-by-step guide for that path
    - Each step is a checklist item (checkbox + instruction text)
    - Secrets checklist derived from blocking issues with "env var" type
  </action>
  <verify>
    `cd /Users/vladcortex/co-founder && npx tsc --noEmit frontend/src/components/deploy/DeployReadinessPanel.tsx frontend/src/app/\(dashboard\)/company/\[id\]/deploy/page.tsx 2>&1 | head -20` — no type errors.
    Verify deploy components exist in frontend/src/components/deploy/.
  </verify>
  <done>Deploy readiness panel shows traffic light with expandable details. Deploy path cards show tradeoffs and step-by-step guides. Per all locked deploy decisions.</done>
</task>

</tasks>

<verification>
- FloatingChat button visible in bottom-right of all dashboard pages
- Chat panel opens with animation, conversations reset on refresh
- Chat link de-emphasized in nav (last item, lower opacity)
- Deploy readiness shows traffic light status
- Deploy paths show options with tradeoffs and steps
- Blocking issues have copy-pasteable fix instructions
</verification>

<success_criteria>
- TypeScript compilation passes for all new components
- FloatingChat rendered in dashboard layout
- Chat link styled as secondary in BrandNav
- Deploy components exist in frontend/src/components/deploy/
</success_criteria>

<output>
After completion, create `.planning/phases/10-export-deploy-readiness-e2e-testing/10-09-SUMMARY.md`
</output>
